@model Neighbors.Models.Product

@{
	ViewData["Title"] = "Products";
}

<h2>Products To Borrow</h2>

<div class="row">
	<button type="button" id="modal-trigger" class="btn-transparent" data-toggle="modal">
		Offer Your Product
	</button> 
	<span class="glyphicon glyphicon-plus"></span>
</div>

@{await Html.RenderPartialAsync("_SearchProductsPartial", new ProductSearch());}

<div class="table-responsive">
	<table class="table table-striped table-hover " id="productsMainTable">
		<thead>
			<tr>
				<th>
					@Html.DisplayNameFor(model => model.Name)
				</th>
				<th>
					@Html.DisplayNameFor(model => model.Category)
				</th>
				<th>
					@Html.DisplayNameFor(model => model.OwnerId)
				</th>
				<th>
					@Html.DisplayNameFor(model => model.BorrowsDays)
				</th>
				<th>
					@Html.DisplayNameFor(model => model.Price)
				</th>
				<th></th>
			</tr>
		</thead>
		<tbody id="productBody" style="display:none">
		</tbody>
	</table>
</div>

@{await Html.RenderPartialAsync("/Views/Products/_ProductsCharts.cshtml");}

<script>

	try {
		getProducts();
		getProductsBy("City");
		getProductsBy("Category");
	}
	catch(err) {
		console.log("Failed to load charts or products: " + err  );
	}
</script>

